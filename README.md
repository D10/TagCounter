# TagCounter

Данный сервис подсчитывает кол-во html тегов на любой веб-странице

# Запуск сервиса

Сервис можно запустить 2 способами - через docker-compose и вручную
Для запуска в контейнере docker достаточно ввести в терминале следующую команду:
```docker-compose up```

Если Вы хотите запустить сервис вручную, то открываем окно терминала и пишем первую команду, запускающую локальные сервер django:
```python manage.py runserver 127.0.0.2:8000```

В моем случае я при запуске сервера дополнительно указываю адрес 127.0.0.2, потому что на адресе 127.0.0.1, который django использует по умолчанию, у меня redis.
Далее открываем следующее окно терминала для запуска celery - он необходим для реализации парсинга страницы в фоне:
```celery -A TagCounter worker -l info```

Теперь наш сервис запущен, переходим по адресу 127.0.0.2 и видим, что django сервер активен

# Инструкция по API

Теперь рассмотрим возможности сервиса

Запрос | Ответ
-------|-------
POST /api/tags/ | Принимает в тело запроса параметр ```url``` - ссылка на страницу, теги которой необходимо распарсить, в качестве ответа отдает числовой ```id```, по которому пользователю будет доступен результат парсинга
GET /api/tags/{id} | В параметрах url передается полученый ранее id счетчика, в качестве ответа отдаст json со всеми найдеными на странице тегами. Пример: {'head':'1', 'body':'1', 'div': '4',...}. В случае, если парсинг не был завершен, отдает json ответ {'response': 'Please wait...'}

# Ошибки

Ошибка | Значение
-------|---------
{'response': 'Not Found'} | Указаный в GET запросе id не был найден
{'response': 'URL Error'} | Переданный URL не существует или не имеет html разметки
